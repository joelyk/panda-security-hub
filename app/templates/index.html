{% extends "base.html" %}
{% block content %}
<div class="container mx-auto py-10">
    <h1 class="text-4xl font-bold mb-6 text-gray-900 text-center">Bienvenue sur PandaSecurityHub 🌐</h1>
    <p class="text-lg text-gray-700 mb-8 text-center">Votre source d'actualités sur la cybersécurité et le réseau 🌐<br>Anecdote : Saviez-vous qu’un panda a inspiré une équipe de hackers à créer un outil de sécurité innovant après avoir observé sa capacité à se protéger dans la nature ? 🐼<br>Propulsé par NkiliTech 🚀</p>
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8 justify-items-center">
        {% for article in articles %}
            <div class="card max-w-sm">
                <h2 class="text-xl font-semibold mb-2 text-gray-900">{{ article.title }}</h2>
                <p class="text-gray-700 mb-2">{{ article.summary }}</p>
                {% if article.image and article.image != 'placeholder.jpg' %}
                    <img src="{{ url_for('static', filename='img/' + article.image) }}" alt="Image de l'article" class="w-full h-48 object-cover rounded-lg mb-4">
                {% endif %}
                <p class="text-sm text-gray-500">Par : {{ article.user.username }} - {{ article.date_posted.strftime('%d/%m/%Y') }}</p>
                <a href="{{ url_for('main.article', article_id=article.id) }}" class="btn mt-4 block text-center">Lire plus 🔍</a>
            </div>
        {% endfor %}
    </div>
    {% if current_user.is_authenticated %}
        <div class="chat-container fixed right-8 top-24 w-80">
            <h3 class="text-lg font-semibold mb-2 text-gray-900">Chat 💬</h3>
            <div class="chat-box" id="chat-box">
                {% for message in messages %}
                    <p class="text-gray-800"><strong>{{ message.user.username }}</strong>: {{ message.content }}</p>
                    <p class="text-sm text-gray-500">{{ message.date_posted.strftime('%H:%M') }}</p>
                {% endfor %}
            </div>
            <input type="text" id="chat-input" class="chat-input" placeholder="Tapez votre message...">
        </div>
    {% else %}
        <p class="text-gray-600 text-center mt-6">Connectez-vous pour accéder au chat. 🔐</p>
    {% endif %}
</div>
{% endblock %}